<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epic Adventure Terminal</title>
    <style>
        body {
            background-color: #282c34;
            color: #61dafb;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: 'Courier New', Courier, monospace;
        }

        .terminal {
            background-color: #1c1c1c;
            width: 80%;
            max-width: 800px;
            border-radius: 5px;
            padding: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
        }

        .terminal-output {
            height: 400px;
            overflow-y: auto;
            padding: 10px;
            border-bottom: 1px solid #61dafb;
            margin-bottom: 10px;
            white-space: pre-wrap; /* Ensures that whitespace is preserved */
        }

        .terminal-input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background-color: #333;
            color: #61dafb;
            font-size: 16px;
        }

        .terminal-input:focus {
            outline: none;
        }
    </style>
</head>
<body>
    <div class="terminal">
        <div id="terminal-output" class="terminal-output"></div>
        <input type="text" id="terminal-input" class="terminal-input" placeholder="Type your command here...">
    </div>
    <script>
        const MAX_HEALTH = 100;
        const MIN_DAMAGE = 5;
        const HEALTH_GAIN = 10;

        class Player {
            constructor(name) {
                this.name = name;
                this.health = MAX_HEALTH;
            }
        }

        class Enemy {
            constructor(name, maxHealth, attackDamage) {
                this.name = name;
                this.maxHealth = maxHealth;
                this.attackDamage = attackDamage;
            }
        }

        let player;
        let enemies;
        let defeatedEnemies = [];
        let currentEnemy;
        let scenarios;
        let inBattle = false;

        document.getElementById('terminal-input').addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                const input = event.target.value.trim().toLowerCase();
                event.target.value = '';
                processInput(input);
            }
        });

        function print(message) {
            const terminalOutput = document.getElementById('terminal-output');
            terminalOutput.innerHTML += `${message}<br><br>`;  // Add double <br> for better spacing
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }

        function processInput(input) {
            if (!player) {
                player = new Player(input);
                initializeGame();
            } else if (inBattle) {
                handleBattleInput(input);
            } else {
                handleGameInput(input);
            }
        }

        function initializeGame() {
            print(`
    ***************************************************************************
    ***************************************************************************
    ********************* Welcome to the Epic Adventure! **********************
    ***************************************************************************
    ***************************************************************************
            `);
            print(`\nHello ${player.name}.\n\nYou find yourself suddenly teleported to an unfamiliar crossroad surrounded by four different paths.\n`);
            print("To the North:\tYou see a dense forest stretching as far as the eye can see.");
            print("To the East:\tYou see smoke rising from a distant village.");
            print("To the South:\tYou see a mysterious cave entrance beckoning with an eerie glow.");
            print("To the West:\tYou see a narrow path leading up a steep mountain.\n");

            enemies = {
                "north": new Enemy("Bear", 50, 20),
                "east": new Enemy("Bandit Leader", 65, 30),
                "south": new Enemy("Cave Troll", 85, 40),
                "west": new Enemy("Dragon", 200, 75)
            };
            scenarios = {
                "north": "\n\tYou enter the dense forest.\nThe air is thick with the scent of pine and damp earth.\nAs you walk deeper, you hear rustling in the bushes.\nYou try to ignore it and decide to keep walking.\nBefore you can take another step, out lunges a wild bear!\nIt's hungry as heck and you look delicious!\n",
                "east": "\n\tAs you head towards the distant village,\nfollowing the trail of smoke, you notice something alarming:\nthe village is under attack by a group of bandits!\n\tTheir leader gestures to his gang, and they quickly encircle you both.\nTheir chants of 'FIGHT! FIGHT! FIGHT!' echo through the air.",
                "south": "\n\tYou enter the mysterious cave.\nThe air is cool and damp, with faint echoes bouncing off the walls.\nAs you venture deeper, you notice glowing crystals illuminating the path.\nYou start to feel uneasy, so you turn around to leave.\nYou turn and find yourself face to face with a troll!\n\t'Your bones will make a great addition to my collection!'",
                "west": "\n\tYou start your ascent up the steep mountain path.\nThe higher you climb, the more breathtaking the view becomes.\nAfter a challenging climb, you reach a serene mountaintop lake.\nThe air grows suddenly cold.\nThe wind picks up, carrying a bone-chilling roar that echoes through the peaks.\nYour heart pounds as a colossal shadow blots out the sun.\nWith a thunderous crash, a dragon descends from the swirling clouds, its scales gleaming ominously.\nIts piercing eyes lock onto you, and its wings cast a dark shadow over the lake.\nThe ground trembles beneath its massive claws as it emits a low, rumbling growl.\nYou ready your weapon."
            };
        }

        function handleGameInput(input) {
            if (["north", "east", "south", "west"].includes(input)) {
                if (defeatedEnemies.includes(input)) {
                    print("You have already defeated the enemy in this direction.");
                } else {
                    currentEnemy = enemies[input];
                    print(scenarios[input]);
                    print("What will you do?\n1. Attack\n2. Defend");
                    printStatus();
                    inBattle = true;
                }
            } else {
                print("Invalid input. Please choose a direction (North / East / South / West).");
            }
        }

        function handleBattleInput(input) {
            if (input === "1" || input === "attack") {
                playerAttack();
            } else if (input === "2" || input === "defend") {
                playerDefend();
            } else {
                print("Invalid input. Please choose an action (1. Attack / 2. Defend).");
            }
        }

        function playerAttack() {
            let playerAttackValue = calculatePlayerAttack(currentEnemy.attackDamage);
            currentEnemy.maxHealth -= playerAttackValue;
            print(`${player.name} attacked the ${currentEnemy.name} and dealt ${playerAttackValue} damage!`);

            if (currentEnemy.maxHealth <= 0) {
                print(`The ${currentEnemy.name} has been defeated! You rest and gain ${HEALTH_GAIN} health!`);
                player.health = Math.min(player.health + HEALTH_GAIN, MAX_HEALTH);
                defeatedEnemies.push(Object.keys(enemies).find(key => enemies[key] === currentEnemy));
                inBattle = false;
            } else {
                enemyAttack();
            }
            printStatus();
        }

        function playerDefend() {
            let defendValue = calculateDefendDamage(MIN_DAMAGE, currentEnemy.attackDamage);
            player.health -= defendValue;
            print(`You defended against the ${currentEnemy.name}'s attack and received ${defendValue} damage!`);

            if (player.health <= 0) {
                print("You have been defeated. Game over.");
                inBattle = false;
            } else {
                enemyAttack();
            }
            printStatus();
        }

        function enemyAttack() {
            let enemyAttackValue = calculateEnemyAttack(MIN_DAMAGE, currentEnemy.attackDamage);
            player.health -= enemyAttackValue;
            print(`The ${currentEnemy.name} attacked ${player.name} and dealt ${enemyAttackValue} damage!`);

            if (player.health <= 0) {
                print("You have been defeated. Game over.");
                inBattle = false;
            }
            printStatus();
        }

        function printStatus() {
            print(`\n${player.name}'s Health: ${player.health}\n${currentEnemy.name}'s Health: ${currentEnemy.maxHealth}\n`);
        }

        function calculatePlayerAttack(maxDamage) {
            return Math.floor(Math.random() * (maxDamage / 2) + maxDamage / 2);
        }

        function calculateEnemyAttack(minDamage, maxDamage) {
            return Math.floor(Math.random() * (maxDamage / 2) + minDamage);
        }

        function calculateDefendDamage(minDamage, maxDamage) {
            return Math.max(0, Math.floor(Math.random() * (maxDamage / 2) + minDamage) - Math.floor(Math.random() * (

maxDamage / 3)));
        }

        document.addEventListener('DOMContentLoaded', () => {
            print("Welcome to the Epic Adventure! What is your name?");
        });
    </script>
</body>
</html>